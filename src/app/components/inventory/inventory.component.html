<div class="inventory-page-container">
  <h1 class="table-header">Add New Device</h1>
  <form [formGroup]="addPhoneForm" (ngSubmit)="submitPhones()" class="inventory-form">
    <div formArrayName="phones">
      <div *ngFor="let phone of phonesFormArray.controls; let i = index" [formGroupName]="i" class="phone-input-group">

        <mat-form-field appearance="fill" class="input-field">
          <mat-label>IMEI</mat-label>
          <input matInput formControlName="imei">
        </mat-form-field>

        <mat-form-field appearance="fill" class="input-field">
          <mat-label>Type</mat-label>
          <mat-select formControlName="type">
            <mat-option value="SMARTPHONE">Smartphone</mat-option>
            <mat-option value="FLIP">Flip Phone</mat-option>
            <mat-option value="TABLET">Tablet</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill" class="input-field">
          <mat-label>Model</mat-label>
          <input matInput formControlName="model">
        </mat-form-field>

        <button mat-icon-button color="warn" (click)="removePhoneInput(i)" class="delete-button">
          <mat-icon>delete</mat-icon>
        </button>

      </div>
    </div>

    <div class="form-actions">
      <button mat-button (click)="addNewPhoneInput()">Add Another Phone</button>
      <button mat-raised-button color="primary" type="submit">Add to Inventory</button>
    </div>
  </form>
</div>



<div class="inventory-page-container">
  <h1 class="table-header">Inventory Re-Assign</h1>
  <form [formGroup]="reAssignForm" (ngSubmit)="submitReAssign()" class="inventory-form">
    <!-- IMEI Field for Re-Assign Form -->
    <div class="phone-input-group">
      <mat-form-field appearance="fill" class="input-field">
        <mat-label>IMEI</mat-label>
        <input matInput formControlName="imei" placeholder="Enter IMEI to re-assign">
      </mat-form-field>
    </div>

    <div class="phone-input-group">
      <!-- Master Agent Field -->
      <mat-form-field appearance="fill" class="input-field">
        <mat-label>Master Agent</mat-label>
        <input matInput formControlName="masterAgent">
      </mat-form-field>

      <!-- Distributor Field -->
      <mat-form-field appearance="fill" class="input-field">
        <mat-label>Distributor</mat-label>
        <input matInput formControlName="distributor">
      </mat-form-field>
    </div>

    <div class="phone-input-group">
      <!-- Retailer Field -->
      <mat-form-field appearance="fill" class="input-field">
        <mat-label>Retailer</mat-label>
        <input matInput formControlName="retailer">
      </mat-form-field>

      <!-- Employee Field -->
      <div formGroupName="employee">
        <mat-form-field appearance="fill" class="input-field">
          <mat-label>Agency ID</mat-label>
          <input matInput formControlName="id" placeholder="Agency ID">
        </mat-form-field>
      </div>


    </div>

    <div class="form-actions">
      <button mat-raised-button color="primary" type="submit">Update Inventory</button>
    </div>
  </form>
</div>




<div class="table-container">
  <div class="mat-elevation-z8">
    <h1 class="table-header">Inventory</h1>
    <table mat-table [dataSource]="phones" class="mat-elevation-z8">

      <!-- IMEI Column -->
      <ng-container matColumnDef="imei">
        <th mat-header-cell *matHeaderCellDef> IMEI </th>
        <td mat-cell *matCellDef="let element"> {{element.imei}} </td>
      </ng-container>

      <!-- Status Column -->
      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef> Status </th>
        <td mat-cell *matCellDef="let element"> {{element.status}} </td>
      </ng-container>

      <!-- Type Column -->
      <ng-container matColumnDef="type">
        <th mat-header-cell *matHeaderCellDef> Type </th>
        <td mat-cell *matCellDef="let element"> {{element.type}} </td>
      </ng-container>

      <!-- Model Column -->
      <ng-container matColumnDef="model">
        <th mat-header-cell *matHeaderCellDef> Model </th>
        <td mat-cell *matCellDef="let element"> {{element.model}} </td>
      </ng-container>

      <!-- Date Column -->
      <ng-container matColumnDef="date">
        <th mat-header-cell *matHeaderCellDef> Date </th>
        <td mat-cell *matCellDef="let element"> {{element.date | date:'medium'}} </td>
      </ng-container>

      <ng-container matColumnDef="masterAgent">
        <th mat-header-cell *matHeaderCellDef> Master Agent </th>
        <td mat-cell *matCellDef="let element"> {{element.masterAgent}} </td>
      </ng-container>

      <!-- Distributor Column -->
      <ng-container matColumnDef="distributor">
        <th mat-header-cell *matHeaderCellDef> Distributor </th>
        <td mat-cell *matCellDef="let element"> {{element.distributor}} </td>
      </ng-container>

      <!-- Retailer Column -->
      <ng-container matColumnDef="retailer">
        <th mat-header-cell *matHeaderCellDef> Retailer </th>
        <td mat-cell *matCellDef="let element"> {{element.retailer}} </td>
      </ng-container>

      <!-- Employee Column (Displaying Username) -->
      <ng-container matColumnDef="employee">
        <th mat-header-cell *matHeaderCellDef> Employee </th>
        <td mat-cell *matCellDef="let element"> {{element.employee?.username}} </td>
      </ng-container>

      <!-- Header and Row Declarations -->
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

    </table>
  </div>

  <mat-paginator [length]="totalElements" [pageSize]="pageSize" [pageSizeOptions]="[5, 10, 20]"
    (page)="changePage($event)">
  </mat-paginator>
</div>
